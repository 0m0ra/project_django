# Архитектурная схема приложения

## Общая архитектура

```
┌─────────────────────────────────────────────────────────────┐
│                        БРАУЗЕР                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   HTML/CSS   │  │  JavaScript  │  │   AJAX       │     │
│  │  Templates   │  │   (main.js)  │  │  Requests    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└───────────────────────────┬─────────────────────────────────┘
                            │
                            │ HTTP/HTTPS
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                    DJANGO FRAMEWORK                         │
│  ┌─────────────────────────────────────────────────────┐  │
│  │                    URL Router                        │  │
│  │  (todo_project/urls.py → todo_app/urls.py)          │  │
│  └───────────────────────┬─────────────────────────────┘  │
│                          │                                  │
│  ┌───────────────────────▼─────────────────────────────┐  │
│  │                    Views Layer                       │  │
│  │  - task_list()      - task_create()                 │  │
│  │  - task_toggle()    - task_delete()                 │  │
│  └───────────────────────┬─────────────────────────────┘  │
│                          │                                  │
│  ┌───────────────────────▼─────────────────────────────┐  │
│  │                    Forms Layer                      │  │
│  │  - TaskForm (валидация данных)                      │  │
│  └───────────────────────┬─────────────────────────────┘  │
│                          │                                  │
│  ┌───────────────────────▼─────────────────────────────┐  │
│  │                    Models Layer                     │  │
│  │  - Task (ORM модель)                                │  │
│  └───────────────────────┬─────────────────────────────┘  │
└───────────────────────────┬─────────────────────────────────┘
                            │
                            │ SQL Queries (ORM)
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                    SQLite DATABASE                          │
│  ┌─────────────────────────────────────────────────────┐  │
│  │  Tables:                                            │  │
│  │  - auth_user                                        │  │
│  │  - todo_app_task                                    │  │
│  └─────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                  DJANGO ADMIN PANEL                         │
│  ┌─────────────────────────────────────────────────────┐  │
│  │  - TaskAdmin (управление задачами)                  │  │
│  │  - Фильтры, поиск, массовые операции               │  │
│  └─────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## Поток данных

### 1. Создание задачи

```
Пользователь → Форма → POST /create/
    ↓
Views.task_create()
    ↓
TaskForm (валидация)
    ↓
Task.save() → ORM → SQLite
    ↓
Response (JSON или Redirect)
    ↓
Браузер обновляет UI
```

### 2. Переключение статуса

```
Пользователь → Checkbox → AJAX POST /<id>/toggle/
    ↓
Views.task_toggle()
    ↓
Task.completed = !Task.completed
    ↓
Task.save() → ORM → SQLite
    ↓
JSON Response
    ↓
JavaScript обновляет UI (без перезагрузки)
```

### 3. Удаление задачи

```
Пользователь → Кнопка 🗑 → AJAX POST /<id>/delete/
    ↓
Views.task_delete()
    ↓
Task.delete() → ORM → SQLite
    ↓
JSON Response
    ↓
JavaScript удаляет элемент из DOM
```

## Компоненты системы

### Frontend
- **HTML Templates**: Django шаблоны с наследованием
- **CSS**: Современный дизайн с градиентами и анимациями
- **JavaScript**: Vanilla JS для AJAX-взаимодействия

### Backend
- **URL Routing**: Маршрутизация запросов
- **Views**: Обработка бизнес-логики
- **Forms**: Валидация пользовательского ввода
- **Models**: ORM для работы с БД
- **Admin**: Встроенная админ-панель Django

### Database
- **SQLite**: Легковесная БД для разработки
- **ORM**: Django ORM для абстракции SQL

## Безопасность

- **CSRF Protection**: Защита от межсайтовых запросов
- **Authentication**: Интеграция с Django Auth
- **Permission Checks**: Проверка прав доступа к задачам
- **SQL Injection Protection**: ORM защищает от SQL-инъекций

